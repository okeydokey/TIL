# [DDD Start!](https://jiandson.co.kr/books/7)

### CH6. 응용 서비스와 표현 영역
- 표현 영역 : 사용자의 요청을 해석
- 응용 영역 : 사용자가 원하는 기능을 제공, 기능을 실행하는 데 필요한 입력값을 메서드 파라미터로 전달 받고 실행 결과를 리턴

#### 응용 서비스의 역할
- 도메인 객체 간의 흐름을 제어
- 트랜잭션 처리
- 접근 제어
- 이벤트 처리
- 도메인 로직 금지!!!!!!!!!!!!!!!!!!!!!! (응집도가 떨어지고 중복 코드 발생)

#### 응용 서비스의 구현
- 크기 : 한 응용 서비스 클래스에서 한 개 내지 2~3개의 기능을 구현, 크기를 작게 할 경우 중복 코드가 발생할 수 있는데 콩통이 되는 로직을 별도 클래스로 구현
- 인터페이스 : 인터페이스가 명확하게 필요하기 전까지는 응용 서비스에 대한 인터페이스를 작성하는 것이 좋은 설계라고는 볼 수 없음
- 리턴 : 애그리거트 자체를 리턴하면 도메인 로직 실행이 오픈되어 코드의 응집도를 낮추기때문에 응용 서비스는 표현 영역에서 필요한 데이터만 리턴하는 것이 기능 실행 로직의 응집도를 높이는 확실한 방법
- 파라미터 : 표현영역에 의존하지 않도록 주의 (ex. HttpServletRequest, HttpSession를 파라미터로 전달하면 안됨)
- 도메인 이벤트 처리

#### 표현 영역
- 화면 흐름 제공 및 제어
- 사용자의 요청을 알맞은 응용 서비스에 전달하고 결과를 사용자에게 제공
- 사용자 세션 관리

#### 값 검증
- 원칙적으로 모든 값에 대한 검증은 응용 서비스에서 처리
- 필수 값과 값의 형식을 표현 영역에서 검사
- 중복 여부와 같은 논리적 오류만 검사

#### 권한 검사
- 표현 영역 : 인증 여부, URL 기준 권한 (Interceptor, Servlet Filter)
- 응용 서비스 : 메서드 단위 권한 검사 (AOP)

#### 조회 전용 기능
- 서비스를 굳이 만들 필요 없이 표현 영역에서 바로 조회 전용 기능을 사용


### CH7. 도메인 서비스
- 상태 없이 로직만 구현
- 도메인 서비스를 구현하는 데 필요한 상태는 애그리거트나 다른 방법으로 전달 받음
- 도메인의 의미가 드러나는 용어를 타입과 메서드 이름으로 갖음
- 응용 로직 금지!!!!!!!!!!!!!!!!!!!!!!!

#### 응용 서비스 ? 도메인 서비스 ?
- 해당 로직이 애그리거트의 상태를 변경하거나 애그리거트의 상태 값을 계산하는 지 검사 >> 도메인 서비스!

#### 패키지 위치
- 다른 도메인 구성 요소와 동일한 패키지에 위치


### CH9. 도메인 모델과 BOUNDED CONTEXT
- 하위 도메인 마다 같은 용어라도 의미가 다르고 같은 대상이라도 지칭하는 용어가 다를 수 있음
- 하위 도메인마다 사용하는 용어가 다르기 때문에 올바른 도메인 모델을 개발하려면 하위 도메인마다 모델을 만들어야 함
- 모델은 특정한 컨텍스트(문맥) 하에서 완전한 의미를 갖음
- 구분되는 경계를 갖는 컨텍스트를 BOUNDED CONTEXT 라고 칭함

#### BOUNDED CONTEXT
- 모델의 경계를 결정
- 한개의 BOUNDED CONTEXT는 한개의 모델을 갖음
- 용어를 기준으로 구분
- 사용자에게 기능을 제공하는 물리적 시스템으로 도메인 모델은 이 BOUNDED CONTEXT 안에서 도메인을 구현

##### 여러 하위 도메인을 하나의 BOUNDED CONTEXT에서 개발할 때 주의 점
- 하위 도메인의 모델이 뒤섞이지 않도록 하는 것
- 도메인 모델이 개별 하위 도메인을 제대로 반영하지 못해서 하위 도메인별 기능 확장이 어렵게 되고 이는 서비스의 경쟁력을 떨어뜨리는 원인
- 하위 도메인마다 구분되는 패키지를 갖도록 구현

##### BOUNDED CONTEXT 간 통합
- 외부 연동을 위한 도메인 서비스 구현 클래스는 도메인 모델과 외부 시스템 간의 모델 변환을 처리 (p251)
- 모델간 변환이 복잡하면 별도의 변환기 구현

##### 공개 호스트 서비스 (Open Host Service)
- 하류(고객)컴포넌트 팀이 다수 존재하면 API를 서비스 형태로 제공

##### 안티코럽션 계층 (Anticorruption Layer)
- 상류 컴포넌트 서비스는 상류 BOUNDED CONTEXT 도메인 모델을 따르기 때문에 하류 컴포넌트는 상류 서비스 모델이 자신의 모데인 모델에 영향을 주지 않도록 보호해주는 완충지대 필요
- 하류 컴포넌트에 맞게 모델 객체 변환

##### 공유 커널 (SHARED KERNEL)
- 두 BOUNDED CONTEXT가 같은 모델을 공유
- 중복을 줄여줌
- But, 두 팀간의 밀접한 관계가 필요하며 그렇지 못하면 개발이 지연되고 정체되는 단점

##### 독립 방식 (SEPERATE WAY)
- 서로 독립적으로 모델을 발전 시킴
- 통합 시스템 필요

#### 컨텍스트 맵
- 전체 비즈니스를 조망할 수 있는 지도